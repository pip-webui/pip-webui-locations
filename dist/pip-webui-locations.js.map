{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/dependencies/translate.ts","src/location/location.ts","src/location_dialog/location_dialog.ts","src/location_edit/location_edit.ts","src/location_ip/location_ip.ts","src/location_map/location_map.ts","src/locations.ts","temp/pip-webui-locations-html.min.js"],"names":[],"mappings":"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","file":"pip-webui-locations.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLocations.Translate', []);\r\n\r\n    thisModule.filter('translate', function ($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return function (key) {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    });\r\n\r\n})();\r\n\r\n","/**\r\n * @file Location control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve samples in sampler app\r\n */\r\n\r\n/* global angular, google */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipLocation\", []);\r\n\r\n    thisModule.directive('pipLocation', \r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipLocationName: '&',\r\n                    pipLocationPos: '&',\r\n                    pipLocationResize: '&',\r\n                    pipShowLocationIcon: '='\r\n                },\r\n                template: \r\n                    function($element, $attrs: any) {\r\n                        function toBoolean(value) {\r\n                            if (value == null) return false;\r\n                            if (!value) return false;\r\n                            value = value.toString().toLowerCase();\r\n                            return value == '1' || value == 'true';\r\n                        }\r\n\r\n                        if (toBoolean($attrs.pipCollapse)) {\r\n                            return String()\r\n                                + '<div class=\"pip-location-name location-collapse\" ng-click=\"pipLocationResize()\" ng-hide=\"!pipLocationName()\"'\r\n                                + 'ng-class=\"pipShowLocationIcon ? \\'pip-location-icon-space\\' : \\'\\'\">'\r\n                                + '<md-icon md-svg-icon=\"icons:location\" class=\"flex-fixed pip-icon\" ng-if=\"pipShowLocationIcon\"></md-icon>'\r\n                                + '<span class=\"pip-location-text\">{{pipLocationName()}}</span> '\r\n                                + '</div>'\r\n                                + '<div class=\"pip-location-container\" ng-hide=\"!pipLocationPos()\"></div>';\r\n                        } else {\r\n                            return String()\r\n                                + '<md-button class=\"pip-location-name\" ng-click=\"pipLocationResize()\" '\r\n                                + 'ng-class=\"pipShowLocationIcon ? \\'pip-location-icon-space\\' : \\'\\'\">'\r\n                                + '<div class=\"layout-align-start-center layout-row w-stretch\">'\r\n                                + '<md-icon md-svg-icon=\"icons:location\" class=\"flex-fixed pip-icon\" ng-if=\"pipShowLocationIcon\"></md-icon>'\r\n                                + '<span class=\"pip-location-text flex\">{{pipLocationName()}}</span>'\r\n                                + '<md-icon md-svg-icon=\"icons:triangle-down\" class=\"flex-fixed\" ng-if=\"!showMap\"></md-icon>'\r\n                                + '<md-icon md-svg-icon=\"icons:triangle-up\" class=\"flex-fixed\" ng-if=\"showMap\"></md-icon>'\r\n                                + '</div></md-button>'\r\n                                + '<div class=\"pip-location-container\"'\r\n                                + 'ng-class=\"pipShowLocationIcon ? \\'pip-location-icon-space\\' : \\'\\'\"></div>';\r\n                        }\r\n                    },\r\n                controller: 'pipLocationController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipLocationController',\r\n        function ($scope, $element, $attrs) {\r\n\r\n            function toBoolean(value) {\r\n                if (value == null) return false;\r\n                if (!value) return false;\r\n                value = value.toString().toLowerCase();\r\n                return value == '1' || value == 'true';\r\n            }\r\n\r\n            var \r\n                $name = $element.children('.pip-location-name'),\r\n                $mapContainer = $element.children('.pip-location-container'),\r\n                $mapControl = null,\r\n                $up = $element.find('.icon-up'),\r\n                $down = $element.find('.icon-down'),\r\n                collapsable = toBoolean($attrs.pipCollapse);\r\n\r\n            function clearMap() {\r\n                // Remove map control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = null;\r\n                $mapContainer.hide();\r\n            };\r\n\r\n            function generateMap() {\r\n                var location = $scope.pipLocationPos();\r\n                \r\n                // Safeguard for bad coordinates\r\n                if ($scope.showMap == false || location == null\r\n                    || location.coordinates == null\r\n                    || location.coordinates.length < 0) {\r\n                    clearMap();\r\n                    return;\r\n                }\r\n\r\n                // Determine map coordinates\r\n                var coordinates = new google.maps.LatLng(\r\n                    location.coordinates[0],\r\n                    location.coordinates[1]\r\n                );\r\n\r\n                // Clean up the control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = $('<div></div>');\r\n                $mapContainer.show();\r\n                $mapControl.appendTo($mapContainer);\r\n\r\n                // Create the map with point marker\r\n                var \r\n                    mapOptions = {\r\n                        center: coordinates,\r\n                        zoom: 12,\r\n                        mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                        disableDefaultUI: true,\r\n                        disableDoubleClickZoom: true,\r\n                        scrollwheel: false,\r\n                        draggable: false\r\n                    },\r\n                    map = new google.maps.Map($mapControl[0], mapOptions);\r\n                    \r\n                new google.maps.Marker({\r\n                    position: coordinates,\r\n                    map: map\r\n                });\r\n            };\r\n\r\n            // Process user actions\r\n            if (!collapsable) {\r\n                $scope.showMap = false;\r\n                $up.hide();\r\n                $mapContainer.hide();\r\n\r\n                $name.click(function (event) {\r\n                    event.stopPropagation();\r\n                    if ($attrs.disabled) return;\r\n                    $scope.showMap = !$scope.showMap;\r\n                    $up[$scope.showMap ? 'show' : 'hide']();\r\n                    $down[!$scope.showMap ? 'show' : 'hide']();\r\n                    generateMap();\r\n                });\r\n            }\r\n\r\n            // Watch for location changes\r\n            if (toBoolean($attrs.pipRebind)) {\r\n                $scope.$watch($scope.pipLocationPos,\r\n                    function (newValue) {\r\n                        generateMap();\r\n                    }\r\n                );\r\n            }\r\n\r\n            // Add class\r\n            $element.addClass('pip-location');\r\n\r\n            // Visualize map\r\n            if ($scope.pipLocationPos()) generateMap();\r\n            else clearMap();\r\n        }    \r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Location edit dialog\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve sample in sampler app\r\n */\r\n \r\n/* global angular, google */\r\n\r\nclass LocationDialogService {\r\n    private _$mdDialog: angular.material.IDialogService;\r\n\r\n    constructor($mdDialog: angular.material.IDialogService) {\r\n        this._$mdDialog = $mdDialog;\r\n    }\r\n\r\n    public show (params, successCallback, cancelCallback) {\r\n        this._$mdDialog.show({\r\n            controller: 'pipLocationEditDialogController',\r\n            templateUrl: 'location_dialog/location_dialog.html',\r\n            locals: {\r\n                locationName: params.locationName,\r\n                locationPos: params.locationPos\r\n            },\r\n            clickOutsideToClose: true\r\n        })\r\n        .then((result) => {\r\n            if (successCallback) {\r\n                successCallback(result);\r\n            }\r\n        }, () => {\r\n            if (cancelCallback) {\r\n                cancelCallback();\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n(() => {\r\n    'use strict';\r\n    function LocationDialogRun ($injector) {\r\n        let pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n        if (pipTranslate) {\r\n            pipTranslate.setTranslations('en', {\r\n                'LOCATION_ADD_LOCATION': 'Add location',\r\n                'LOCATION_SET_LOCATION': 'Set location',\r\n                'LOCATION_ADD_PIN': 'Add pin',\r\n                'LOCATION_REMOVE_PIN': 'Remove pin'\r\n            });\r\n            pipTranslate.setTranslations('ru', {\r\n                'LOCATION_ADD_LOCATION': 'Добавить местоположение',\r\n                'LOCATION_SET_LOCATION': 'Определить положение',\r\n                'LOCATION_ADD_PIN': 'Добавить точку',\r\n                'LOCATION_REMOVE_PIN': 'Убрать точку'\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    angular.module('pipLocationEditDialog', ['ngMaterial',  'pipLocations.Templates'])\r\n           .run(LocationDialogRun)\r\n           .service('pipLocationEditDialog', LocationDialogService)\r\n\r\n    .controller('pipLocationEditDialogController', \r\n        function ($scope, $rootScope, $timeout, $mdDialog,  locationPos, locationName) {\r\n\r\n            $scope.theme = $rootScope.$theme;\r\n            $scope.locationPos = locationPos && locationPos.type == 'Point'\r\n                && locationPos.coordinates && locationPos.coordinates.length == 2\r\n                ? locationPos : null;\r\n            $scope.locationName = locationName;\r\n            $scope.supportSet = navigator.geolocation != null;\r\n\r\n            // $scope.transaction = pipTransaction('location_edit_dialog', $scope);\r\n\r\n            var map = null, marker = null;\r\n\r\n            function createMarker (coordinates) {\r\n                if (marker) marker.setMap(null);\r\n                \r\n                if (coordinates) {\r\n                    marker = new google.maps.Marker({ \r\n                        position: coordinates, \r\n                        map: map,\r\n                        draggable: true,\r\n                        animation: google.maps.Animation.DROP\r\n                    });\r\n\r\n                    var thisMarker = marker;\r\n                    google.maps.event.addListener(thisMarker, 'dragend', function() {\r\n                       var coordinates = thisMarker.getPosition(); \r\n                       changeLocation(coordinates, null);\r\n                    });\r\n                } else {\r\n                    marker = null;\r\n                }\r\n\r\n                return marker;\r\n            };\r\n\r\n            function changeLocation(coordinates, tid) {\r\n                $scope.locationPos = {\r\n                    type: 'Point',\r\n                    coordinates: [coordinates.lat(), coordinates.lng()]\r\n                };\r\n                $scope.locationName = null;\r\n\r\n                if (tid == null) {\r\n                    // tid = $scope.transaction.begin();\r\n                    if (tid == null) return;\r\n                }\r\n\r\n                // Read address\r\n                var geocoder = new google.maps.Geocoder();\r\n                geocoder.geocode({ location: coordinates }, function(results, status) {\r\n                    // if ($scope.transaction.aborted(tid)) return;\r\n\r\n                    // Process positive response\r\n                    if (status == google.maps.GeocoderStatus.OK\r\n                        && results && results.length > 0) {\r\n                        $scope.locationName = results[0].formatted_address;\r\n                    }\r\n\r\n                    // $scope.transaction.end();\r\n                    $scope.$apply();\r\n                });\r\n            };\r\n\r\n            // Wait until dialog is initialized\r\n            $timeout(function () {\r\n                var mapContainer = $('.pip-location-edit-dialog .pip-location-container');\r\n\r\n                // Calculate coordinate of the center\r\n                var coordinates = $scope.locationPos ?\r\n                    new google.maps.LatLng(\r\n                        $scope.locationPos.coordinates[0],\r\n                        $scope.locationPos.coordinates[1]\r\n                    ) : null;\r\n\r\n                // Create the map with point marker\r\n                var mapOptions = {\r\n                    center: new google.maps.LatLng(0, 0),\r\n                    zoom: 1,\r\n                    mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                    disableDefaultUI: true\r\n                };\r\n                if (coordinates != null) {\r\n                    mapOptions.center = coordinates;\r\n                    mapOptions.zoom = 12;\r\n                }\r\n\r\n                map = new google.maps.Map(mapContainer[0], mapOptions);\r\n                marker = createMarker(coordinates);\r\n\r\n                // Fix resizing issue\r\n                setTimeout(function () {\r\n                    google.maps.event.trigger(map, 'resize');\r\n                }, 1000);\r\n            }, 0);\r\n\r\n            $scope.$on('pipLayoutResized', function (event) {\r\n                if (map == null) return;\r\n                google.maps.event.trigger(map, 'resize');\r\n            });\r\n\r\n            $scope.onAddPin = function () {\r\n                if (map == null) return;\r\n\r\n                var coordinates = map.getCenter();\r\n                marker = createMarker(coordinates);\r\n                changeLocation(coordinates, null);\r\n            };\r\n\r\n            $scope.onRemovePin = function () {\r\n                if (map == null) return;\r\n                marker = createMarker(null);\r\n                $scope.locationPos = null;\r\n                $scope.locationName = null;\r\n            };\r\n\r\n            $scope.onZoomIn = function () {\r\n                if (map == null) return;\r\n                var zoom = map.getZoom();\r\n                map.setZoom(zoom + 1);\r\n            };\r\n\r\n            $scope.onZoomOut = function () {\r\n                if (map == null) return;\r\n                var zoom = map.getZoom();\r\n                map.setZoom(zoom > 1 ? zoom - 1 : zoom);\r\n            };\r\n\r\n            $scope.onSetLocation = function () {\r\n                if (map == null) return;\r\n\r\n                // var tid = $scope.transaction.begin();\r\n                // if (tid == null) return;\r\n\r\n                navigator.geolocation.getCurrentPosition(\r\n                    function (position) {\r\n                        // if ($scope.transaction.aborted(tid)) return;\r\n\r\n                        var coordinates = new google.maps.LatLng(\r\n                            position.coords.latitude, position.coords.longitude);\r\n\r\n                        marker = createMarker(coordinates);\r\n                        map.setCenter(coordinates);\r\n                        map.setZoom(12);\r\n\r\n                        changeLocation(coordinates, null);\r\n                    },\r\n                    function () {\r\n                        // $scope.transaction.end();\r\n                        $scope.$apply();\r\n                    },\r\n                    {\r\n                        maximumAge: 0,\r\n                        enableHighAccuracy: true,\r\n                        timeout: 5000\r\n                    }\r\n                );\r\n            };\r\n\r\n            $scope.onCancel = function () {\r\n                $mdDialog.cancel();\r\n            };\r\n\r\n            $scope.onApply = function () {\r\n                $mdDialog.hide({\r\n                    location: $scope.locationPos,\r\n                    locationPos: $scope.locationPos,\r\n                    locationName: $scope.locationName   \r\n                });\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Location edit control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve samples in sampler app\r\n */\r\n \r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipLocationEdit\", ['pipLocationEditDialog']);\r\n\r\n    thisModule.directive('pipLocationEdit',\r\n        function ($parse, $http, pipLocationEditDialog) {\r\n            return {\r\n                restrict: 'EAC',\r\n                scope: {\r\n                    pipLocationName: '=',\r\n                    pipLocationPos: '=',\r\n                    pipLocationHolder: '=',\r\n                    ngDisabled: '&',\r\n                    pipChanged: '&'\r\n                },\r\n                template: String()\r\n                    + '<md-input-container class=\"md-block\">'\r\n                    + '<label>{{ \\'LOCATION\\' | translate }}</label>'\r\n                    + '<input ng-model=\"pipLocationName\"'\r\n                    + 'ng-disabled=\"ngDisabled()\"/></md-input-container>'\r\n                    + '<div class=\"pip-location-empty\" layout=\"column\" layout-align=\"center center\">'\r\n                    + '<md-button class=\"md-raised\" ng-disabled=\"ngDisabled()\" ng-click=\"onSetLocation()\"'\r\n                    + 'aria-label=\"LOCATION_ADD_LOCATION\">'\r\n                    + '<span class=\"icon-location\"></span> {{::\\'LOCATION_ADD_LOCATION\\' | translate }}'\r\n                    + '</md-button></div>'\r\n                    + '<div class=\"pip-location-container\" tabindex=\"{{ ngDisabled() ? -1 : 0 }}\"'\r\n                    + ' ng-click=\"onMapClick($event)\" ng-keypress=\"\"onMapKeyPress($event)\"></div>',\r\n                controller: function ($scope, $element) {\r\n                    $element.find('md-input-container').attr('md-no-float', !!$scope.pipLocationHolder);\r\n                },\r\n                link: function ($scope: any, $element) {\r\n\r\n                    var \r\n                        $empty = $element.children('.pip-location-empty'),\r\n                        $mapContainer = $element.children('.pip-location-container'),\r\n                        $mapControl = null;\r\n\r\n                    function clearMap() {\r\n                        // Remove map control\r\n                        if ($mapControl) $mapControl.remove();\r\n                        $mapControl = null;\r\n\r\n                        // Toggle control visibility\r\n                        $mapContainer.hide();\r\n                        $empty.show();\r\n                    };\r\n\r\n                    function generateMap() {\r\n                        // Safeguard for bad coordinates\r\n                        var location = $scope.pipLocationPos;\r\n                        if (location == null || location.coordinates == null || location.coordinates.length < 0) {\r\n                            clearMap();\r\n                            return;\r\n                        }\r\n\r\n                        // Determine map coordinates\r\n                        var coordinates = new google.maps.LatLng(\r\n                            location.coordinates[0],\r\n                            location.coordinates[1]\r\n                        );\r\n\r\n                        // Clean up the control\r\n                        if ($mapControl) $mapControl.remove();\r\n\r\n                        // Toggle control visibility\r\n                        $mapContainer.show();\r\n                        $empty.hide();\r\n\r\n                        // Add a new map\r\n                        $mapControl = $('<div></div>');\r\n                        $mapControl.appendTo($mapContainer);\r\n\r\n                        // Create the map with point marker\r\n                        var mapOptions = {\r\n                            center: coordinates,\r\n                            zoom: 12,\r\n                            mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                            disableDefaultUI: true,\r\n                            disableDoubleClickZoom: true,\r\n                            scrollwheel: false,\r\n                            draggable: false\r\n                        };\r\n                        var map = new google.maps.Map($mapControl[0], mapOptions);\r\n                        var marker = new google.maps.Marker({\r\n                            position: coordinates,\r\n                            map: map\r\n                        });\r\n                    };\r\n\r\n                    function defineCoordinates() {\r\n                        var locationName = $scope.pipLocationName;\r\n\r\n                        if (locationName == '') {\r\n                            $scope.pipLocationPos = null;\r\n                            clearMap();\r\n                            $scope.$apply();\r\n                            return;\r\n                        }\r\n\r\n                    //    $http.get('http://maps.googleapis.com/maps/api/geocode/json?address=' + locationName)\r\n                    //    .success(function (response) { ... })\r\n                    //    .error(function (response) {... });\r\n\r\n                        var geocoder = new google.maps.Geocoder();\r\n                        geocoder.geocode({ address: locationName }, function(results, status) {\r\n                            $scope.$apply(function() {\r\n                                // Process response\r\n                                if (status == google.maps.GeocoderStatus.OK) {\r\n                                    // Check for empty results\r\n                                    if (results == null || results.length == 0) {\r\n                                        $scope.pipLocationPos = null;\r\n                                        clearMap();\r\n                                        return;\r\n                                    }\r\n\r\n                                    var \r\n                                        geometry = results[0].geometry || {},\r\n                                        location = geometry.location || {};\r\n\r\n                                    // Check for empty results again\r\n                                    if (location.lat == null || location.lng == null) {\r\n                                        $scope.pipLocationPos = null;\r\n                                        clearMap();\r\n                                        return;\r\n                                    }\r\n\r\n                                    $scope.pipLocationPos = {\r\n                                        type: 'Point',\r\n                                        coordinates: [\r\n                                            location.lat(),\r\n                                            location.lng()\r\n                                        ]\r\n                                    };\r\n\r\n                                    //generateMap();                                \r\n                                } \r\n                                // Process error...\r\n                                else {\r\n                                    $scope.pipLocationPos = null;\r\n                                    //clearMap();                                \r\n                                }\r\n                            });\r\n                        });\r\n\r\n                    };\r\n                    var defineCoordinatesDebounced = _.debounce(defineCoordinates, 2000);\r\n\r\n                    // Process user actions\r\n                    \r\n                    $scope.onSetLocation = function() {\r\n                        if ($scope.ngDisabled()) return;\r\n                          \r\n                        pipLocationEditDialog.show(\r\n                            {\r\n                                locationName: $scope.pipLocationName,\r\n                                locationPos: $scope.pipLocationPos\r\n                            },\r\n                            function (result) {\r\n                                var \r\n                                    location = result.location,\r\n                                    locationName = result.locationName;\r\n\r\n                                // Do not change anything if location is about the same\r\n                                if ($scope.pipLocationPos && $scope.pipLocationPos.type == 'Point'\r\n                                    && $scope.pipLocationPos.coordinates.length == 2\r\n                                    && location && location.coordinates.length == 2\r\n                                    && ($scope.pipLocationPos.coordinates[0] - location.coordinates[0]) < 0.0001\r\n                                    && ($scope.pipLocationPos.coordinates[1] - location.coordinates[1]) < 0.0001\r\n                                    && (locationName == $scope.pipLocationName)) {\r\n                                    return;        \r\n                                }\r\n\r\n                                $scope.pipLocationPos = location;\r\n                                $scope.pipLocationName = locationName;\r\n\r\n                                if (locationName == null && location != null) {\r\n                                    $scope.pipLocationName = \r\n                                        '(' + result.location.coordinates[0]\r\n                                        + ',' + result.location.coordinates[1] + ')';\r\n                                }\r\n                                $scope.pipChanged();\r\n                                $mapContainer[0].focus();\r\n                            }\r\n                        );\r\n                    };\r\n\r\n                    $scope.onMapClick = function ($event) {\r\n                        if ($scope.ngDisabled()) return;\r\n\r\n                        $mapContainer[0].focus();\r\n                        $scope.onSetLocation();\r\n                        //$event.stopPropagation();\r\n                    };\r\n\r\n                    $scope.onMapKeyPress = function($event) {\r\n                        if ($scope.ngDisabled()) return;\r\n\r\n                        if ($event.keyCode == 13 || $event.keyCode == 32) {\r\n                            $scope.onSetLocation();\r\n                            //$event.stopPropagation();\r\n                        }  \r\n                    };\r\n\r\n                    // Watch for location name changes\r\n                    $scope.$watch(\r\n                        function () {\r\n                            return $scope.pipLocationName\r\n                        },\r\n                        function (newValue, oldValue) {\r\n                            if (newValue != oldValue)\r\n                                defineCoordinatesDebounced();\r\n                        }\r\n                    );\r\n\r\n                    $scope.$watch(\r\n                        function () {\r\n                            return $scope.pipLocationPos\r\n                        },\r\n                        function () {\r\n                            generateMap();\r\n                        }\r\n                    );\r\n\r\n                    // Add class\r\n                    $element.addClass('pip-location-edit');\r\n\r\n                    // Visualize map\r\n                    if ($scope.pipLocationPos) generateMap();\r\n                    else clearMap();\r\n                }\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Location IP control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve samples in sampler app\r\n */\r\n \r\n/* global angular, google */\r\n\r\ndeclare let google: any;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipLocationIp\", []);\r\n\r\n    thisModule.directive('pipLocationIp',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipIpaddress: '&',\r\n                    pipExtraInfo: '&'\r\n                },\r\n                template: '<div class=\"pip-location-container\"></div>',\r\n                controller: 'pipLocationIpController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipLocationIpController',\r\n        function ($scope, $element, $attrs, $http) {\r\n\r\n            var \r\n                $mapContainer = $element.children('.pip-location-container'),\r\n                $mapControl = null;\r\n\r\n            function clearMap() {\r\n                // Remove map control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = null;\r\n            }\r\n\r\n            function generateMap(latitude, longitude) {\r\n                // Safeguard for bad coordinates\r\n                if (latitude == null || longitude == null) {\r\n                    clearMap();\r\n                    return;\r\n                }\r\n\r\n                // Determine map coordinates\r\n                var coordinates = new google.maps.LatLng(\r\n                    latitude,\r\n                    longitude\r\n                );\r\n\r\n                // Clean up the control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = $('<div></div>');\r\n                $mapControl.appendTo($mapContainer);\r\n\r\n                // Create the map with point marker\r\n                var \r\n                    mapOptions = {\r\n                        center: coordinates,\r\n                        zoom: 12,\r\n                        mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                        disableDefaultUI: true,\r\n                        disableDoubleClickZoom: true,\r\n                        scrollwheel: false,\r\n                        draggable: false\r\n                    },\r\n                    map = new google.maps.Map($mapControl[0], mapOptions);\r\n                    \r\n                new google.maps.Marker({\r\n                    position: coordinates,\r\n                    map: map\r\n                });\r\n            }\r\n\r\n            function toBoolean(value) {\r\n                if (value == null) return false;\r\n                if (!value) return false;\r\n                value = value.toString().toLowerCase();\r\n                return value == '1' || value == 'true';\r\n            }\r\n\r\n            function defineCoordinates() {\r\n                var ipAddress = $scope.pipIpaddress();\r\n\r\n                if (ipAddress == '') {\r\n                    clearMap();\r\n                    return;\r\n                }\r\n\r\n                // Todo: Find more reliable geocoding service to locate ip addresses\r\n                $http.jsonp('https://www.geoplugin.net/json.gp?ip=' + ipAddress + '&jsoncallback=JSON_CALLBACK')\r\n                .success(function (response) {\r\n                    if (response != null \r\n                        && response.geoplugin_latitude != null\r\n                        && response.geoplugin_longitude != null) {\r\n                        \r\n                        generateMap(response.geoplugin_latitude, response.geoplugin_longitude);\r\n\r\n                        if ($scope.pipExtraInfo) {\r\n                            var extraInfo = {\r\n                                city: response.geoplugin_city,  \r\n                                regionCode: response.geoplugin_regionCode,  \r\n                                region: response.geoplugin_regionName,  \r\n                                areaCode: response.geoplugin_areaCode,  \r\n                                countryCode: response.geoplugin_countryCode,  \r\n                                country: response.geoplugin_countryName,  \r\n                                continentCode: response.geoplugin_continentCode\r\n                            };\r\n                            $scope.pipExtraInfo({ extraInfo: extraInfo });\r\n                        }\r\n                    } else {\r\n                        clearMap();\r\n                    }\r\n                })\r\n                .error(function (response) {\r\n                    console.error(response);\r\n                    clearMap();\r\n                });\r\n            }\r\n\r\n            // Watch for location changes\r\n            if (toBoolean($attrs.pipRebind)) {\r\n                $scope.$watch(\r\n                    function () {\r\n                        return $scope.pipIpaddress()\r\n                    },\r\n                    function (newValue) {\r\n                        defineCoordinates();\r\n                    }\r\n                );\r\n            }\r\n\r\n            // Add class\r\n            $element.addClass('pip-location-ip');\r\n\r\n            // Visualize map\r\n            defineCoordinates();\r\n        }        \r\n    );\r\n\r\n})();\r\n\r\n","/**\r\n * @file Location map control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular, google */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipLocationMap\", []);\r\n\r\n    thisModule.directive('pipLocationMap',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipLocationPos: '&',\r\n                    pipLocationPositions: '&',\r\n                    pipIconPath: '&',\r\n                    pipDraggable: '&',\r\n                    pipStretch: '&'\r\n                },\r\n                template: '<div class=\"pip-location-container\"></div>',\r\n                controller: 'pipLocationMapController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipLocationMapController',\r\n        ['$scope', '$element', '$attrs', '$parse', '$timeout', function ($scope, $element, $attrs, $parse, $timeout) {\r\n            var\r\n                $mapContainer = $element.children('.pip-location-container'),\r\n                $mapControl = null,\r\n                stretchMap = $scope.pipStretch() || false,\r\n                iconPath = $scope.pipIconPath();\r\n\r\n            function clearMap() {\r\n                // Remove map control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = null;\r\n            }\r\n\r\n            function checkLocation (loc) {\r\n                return !(loc == null\r\n                || loc.coordinates == null\r\n                || loc.coordinates.length < 0);\r\n            }\r\n\r\n            function determineCoordinates(loc) {\r\n                var point = new google.maps.LatLng(\r\n                    loc.coordinates[0],\r\n                    loc.coordinates[1]\r\n                );\r\n\r\n                point.fill = loc.fill;\r\n                point.stroke = loc.stroke;\r\n\r\n                return point;\r\n            }\r\n\r\n            function toBoolean(value) {\r\n                if (value == null) return false;\r\n                if (!value) return false;\r\n                value = value.toString().toLowerCase();\r\n                return value == '1' || value == 'true';\r\n            }\r\n\r\n            function generateMap() {\r\n                var location = $scope.pipLocationPos(),\r\n                    locations = $scope.pipLocationPositions(),\r\n                    points = [],\r\n                    draggable = $scope.pipDraggable() || false;\r\n\r\n                // Safeguard for bad coordinates\r\n                if (checkLocation(location)) {\r\n                    points.push(determineCoordinates(location));\r\n                } else {\r\n                    if (locations && locations.length && locations.length > 0) {\r\n                        locations.forEach(function (loc) {\r\n                            if (checkLocation(loc)) {\r\n                                points.push(determineCoordinates(loc));\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n\r\n                if (points.length === 0) {\r\n                    clearMap();\r\n                    return;\r\n                }\r\n\r\n                // Clean up the control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = $('<div></div>');\r\n                $mapControl.appendTo($mapContainer);\r\n\r\n                // Create the map\r\n                var\r\n                    mapOptions = {\r\n                        center: points[0],\r\n                        zoom: 12,\r\n                        mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                        disableDefaultUI: true,\r\n                        disableDoubleClickZoom: true,\r\n                        scrollwheel: draggable,\r\n                        draggable: draggable\r\n                    },\r\n                    map = new google.maps.Map($mapControl[0], mapOptions),\r\n                    bounds = new google.maps.LatLngBounds();\r\n\r\n                // Create markers\r\n                points.forEach(function(point) {\r\n                    var icon = {\r\n                        path: iconPath,\r\n                        fillColor: point.fill || '#EF5350',\r\n                        fillOpacity: 1,\r\n                        scale: 1,\r\n                        strokeColor: point.stroke || 'white',\r\n                        strokeWeight: 5\r\n                    };\r\n\r\n                    new google.maps.Marker({\r\n                        position: point,\r\n                        map: map,\r\n                        icon: iconPath ? icon : null\r\n                    });\r\n                    bounds.extend(point);\r\n                });\r\n\r\n                // Auto-config of zoom and center\r\n                if (points.length > 1) map.fitBounds(bounds);\r\n            }\r\n\r\n            // Watch for location changes\r\n            if (toBoolean($attrs.pipRebind)) {\r\n                $scope.$watch(\r\n                    function () {\r\n                        return $scope.pipLocationPos()\r\n                    },\r\n                    function () {\r\n                        generateMap();\r\n                    }\r\n                );\r\n            }\r\n\r\n            // Add class\r\n            $element.addClass('pip-location-map');\r\n            if (stretchMap) $mapContainer.addClass('stretch');\r\n\r\n            // Visualize map\r\n            if ($scope.pipLocationPos() || $scope.pipLocationPositions()) $timeout(generateMap, 200);\r\n            else clearMap();\r\n        }]\r\n    );\r\n\r\n})();\r\n\r\n","﻿/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipLocations', [        \r\n        'pipLocation',\r\n        'pipLocationMap',\r\n        'pipLocationIp',\r\n        'pipLocationEditDialog',\r\n        'pipLocationEdit',\r\n        'pipLocations.Translate'\r\n    ]);\r\n    \r\n})();\r\n\r\n\r\n","(function(module) {\ntry {\n  module = angular.module('pipLocations.Templates');\n} catch (e) {\n  module = angular.module('pipLocations.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('location_dialog/location_dialog.html',\n    '<md-dialog class=\"pip-dialog pip-location-edit-dialog layout-column\" md-theme=\"{{theme}}\"><div class=\"pip-header layout-column layout-align-start-start\"><md-progress-linear ng-show=\"transaction.busy()\" md-mode=\"indeterminate\" class=\"pip-progress-top\"></md-progress-linear><h3 class=\"flex\">{{ \\'LOCATION_SET_LOCATION\\' | translate }}</h3></div><div class=\"pip-footer\"><div class=\"layout-row layout-align-start-center\"><md-button class=\"md-accent\" ng-click=\"onAddPin()\" ng-show=\"locationPos == null\" ng-disabled=\"transaction.busy()\" aria-label=\"{{ ::\\'LOCATION_ADD_PIN\\' }}\">{{ ::\\'LOCATION_ADD_PIN\\' | translate }}</md-button><md-button class=\"md-accent\" ng-click=\"onRemovePin()\" ng-show=\"locationPos != null\" ng-disabled=\"transaction.busy()\" aria-label=\"{{ ::\\'LOCATION_REMOVE_PIN\\' }}\">{{ ::\\'LOCATION_REMOVE_PIN\\' | translate }}</md-button></div><div class=\"flex\"></div><div class=\"layout-row layout-align-end-center\"><md-button ng-click=\"onCancel()\" aria-label=\"{{ ::\\'CANCEL\\' }}\">{{ ::\\'CANCEL\\' | translate }}</md-button><md-button class=\"md-accent\" ng-click=\"onApply()\" ng-disabled=\"transaction.busy()\" aria-label=\"{{ ::\\'APPLY\\' }}\">{{ ::\\'APPLY\\' | translate }}</md-button></div></div><div class=\"pip-body\"><div class=\"pip-location-container\"></div><md-button class=\"md-icon-button md-fab pip-zoom-in\" ng-click=\"onZoomIn()\" aria-label=\"{{ ::\\'LOCATION_ZOOM_IN\\' }}\"><md-icon md-svg-icon=\"icons:plus\"></md-icon></md-button><md-button class=\"md-icon-button md-fab pip-zoom-out\" ng-click=\"onZoomOut()\" aria-label=\"{{ ::\\'LOCATION_ZOOM_OUT\\' }}\"><md-icon md-svg-icon=\"icons:minus\"></md-icon></md-button><md-button class=\"md-icon-button md-fab pip-set-location\" ng-click=\"onSetLocation()\" aria-label=\"{{ ::\\'LOCATION_SET_LOCATION\\' }}\" ng-show=\"supportSet\" ng-disabled=\"transaction.busy()\"><md-icon md-svg-icon=\"icons:target\"></md-icon></md-button></div></md-dialog>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-locations-html.min.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZGVwZW5kZW5jaWVzL3RyYW5zbGF0ZS50cyIsInNyYy9sb2NhdGlvbi9sb2NhdGlvbi50cyIsInNyYy9sb2NhdGlvbl9kaWFsb2cvbG9jYXRpb25fZGlhbG9nLnRzIiwic3JjL2xvY2F0aW9uX2VkaXQvbG9jYXRpb25fZWRpdC50cyIsInNyYy9sb2NhdGlvbl9pcC9sb2NhdGlvbl9pcC50cyIsInNyYy9sb2NhdGlvbl9tYXAvbG9jYXRpb25fbWFwLnRzIiwic3JjL2xvY2F0aW9ucy50cyIsInRlbXAvcGlwLXdlYnVpLWxvY2F0aW9ucy1odG1sLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0VBLENBQUM7SUFDRyxZQUFZLENBQUM7SUFFYixJQUFJLFVBQVUsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLHdCQUF3QixFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBRTlELFVBQVUsQ0FBQyxNQUFNLENBQUMsV0FBVyxFQUFFLFVBQVUsU0FBUztRQUM5QyxJQUFJLFlBQVksR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQztjQUMxQyxTQUFTLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxHQUFHLElBQUksQ0FBQztRQUUzQyxNQUFNLENBQUMsVUFBVSxHQUFHO1lBQ2hCLE1BQU0sQ0FBQyxZQUFZLEdBQUksWUFBWSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ3BFLENBQUMsQ0FBQTtJQUNMLENBQUMsQ0FBQyxDQUFDO0FBRVAsQ0FBQyxDQUFDLEVBQUUsQ0FBQzs7QUNQTCxDQUFDO0lBQ0csWUFBWSxDQUFDO0lBRWIsSUFBSSxVQUFVLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFbkQsVUFBVSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQzlCO1FBQ0ks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QyxDQUFDO0FBRVAsQ0FBQyxDQUFDLEVBQUUsQ0FBQzs7QUNkTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIHRoaXNNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwTG9jYXRpb25zLlRyYW5zbGF0ZScsIFtdKTtcclxuXHJcbiAgICB0aGlzTW9kdWxlLmZpbHRlcigndHJhbnNsYXRlJywgZnVuY3Rpb24gKCRpbmplY3Rvcikge1xyXG4gICAgICAgIHZhciBwaXBUcmFuc2xhdGUgPSAkaW5qZWN0b3IuaGFzKCdwaXBUcmFuc2xhdGUnKSBcclxuICAgICAgICAgICAgPyAkaW5qZWN0b3IuZ2V0KCdwaXBUcmFuc2xhdGUnKSA6IG51bGw7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwaXBUcmFuc2xhdGUgID8gcGlwVHJhbnNsYXRlLnRyYW5zbGF0ZShrZXkpIHx8IGtleSA6IGtleTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbn0pKCk7XHJcblxyXG4iLCIvKipcclxuICogQGZpbGUgTG9jYXRpb24gY29udHJvbFxyXG4gKiBAY29weXJpZ2h0IERpZ2l0YWwgTGl2aW5nIFNvZnR3YXJlIENvcnAuIDIwMTQtMjAxNlxyXG4gKiBAdG9kb1xyXG4gKiAtIEltcHJvdmUgc2FtcGxlcyBpbiBzYW1wbGVyIGFwcFxyXG4gKi9cclxuXHJcbi8qIGdsb2JhbCBhbmd1bGFyLCBnb29nbGUgKi9cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIHRoaXNNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZShcInBpcExvY2F0aW9uXCIsIFtdKTtcclxuXHJcbiAgICB0aGlzTW9kdWxlLmRpcmVjdGl2ZSgncGlwTG9jYXRpb24nLCBcclxuICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGlwTG9jYXRpb25OYW1lOiAnJicsXHJcbiAgICAgICAgICAgICAgICAgICAgcGlwTG9jYXRpb25Qb3M6ICcmJyxcclxuICAgICAgICAgICAgICAgICAgICBwaXBMb2NhdGlvblJlc2l6ZTogJyYnLFxyXG4gICAgICAgICAgICAgICAgICAgIHBpcFNob3dMb2NhdGlvbkljb246ICc9J1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigkZWxlbWVudCwgJGF0dHJzOiBhbnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdG9Cb29sZWFuKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPT0gJzEnIHx8IHZhbHVlID09ICd0cnVlJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvQm9vbGVhbigkYXR0cnMucGlwQ29sbGFwc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwicGlwLWxvY2F0aW9uLW5hbWUgbG9jYXRpb24tY29sbGFwc2VcIiBuZy1jbGljaz1cInBpcExvY2F0aW9uUmVzaXplKClcIiBuZy1oaWRlPVwiIXBpcExvY2F0aW9uTmFtZSgpXCInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnbmctY2xhc3M9XCJwaXBTaG93TG9jYXRpb25JY29uID8gXFwncGlwLWxvY2F0aW9uLWljb24tc3BhY2VcXCcgOiBcXCdcXCdcIj4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnPG1kLWljb24gbWQtc3ZnLWljb249XCJpY29uczpsb2NhdGlvblwiIGNsYXNzPVwiZmxleC1maXhlZCBwaXAtaWNvblwiIG5nLWlmPVwicGlwU2hvd0xvY2F0aW9uSWNvblwiPjwvbWQtaWNvbj4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnPHNwYW4gY2xhc3M9XCJwaXAtbG9jYXRpb24tdGV4dFwiPnt7cGlwTG9jYXRpb25OYW1lKCl9fTwvc3Bhbj4gJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgJzwvZGl2PidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwicGlwLWxvY2F0aW9uLWNvbnRhaW5lclwiIG5nLWhpZGU9XCIhcGlwTG9jYXRpb25Qb3MoKVwiPjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICc8bWQtYnV0dG9uIGNsYXNzPVwicGlwLWxvY2F0aW9uLW5hbWVcIiBuZy1jbGljaz1cInBpcExvY2F0aW9uUmVzaXplKClcIiAnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnbmctY2xhc3M9XCJwaXBTaG93TG9jYXRpb25JY29uID8gXFwncGlwLWxvY2F0aW9uLWljb24tc3BhY2VcXCcgOiBcXCdcXCdcIj4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cImxheW91dC1hbGlnbi1zdGFydC1jZW50ZXIgbGF5b3V0LXJvdyB3LXN0cmV0Y2hcIj4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnPG1kLWljb24gbWQtc3ZnLWljb249XCJpY29uczpsb2NhdGlvblwiIGNsYXNzPVwiZmxleC1maXhlZCBwaXAtaWNvblwiIG5nLWlmPVwicGlwU2hvd0xvY2F0aW9uSWNvblwiPjwvbWQtaWNvbj4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnPHNwYW4gY2xhc3M9XCJwaXAtbG9jYXRpb24tdGV4dCBmbGV4XCI+e3twaXBMb2NhdGlvbk5hbWUoKX19PC9zcGFuPidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICc8bWQtaWNvbiBtZC1zdmctaWNvbj1cImljb25zOnRyaWFuZ2xlLWRvd25cIiBjbGFzcz1cImZsZXgtZml4ZWRcIiBuZy1pZj1cIiFzaG93TWFwXCI+PC9tZC1pY29uPidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICc8bWQtaWNvbiBtZC1zdmctaWNvbj1cImljb25zOnRyaWFuZ2xlLXVwXCIgY2xhc3M9XCJmbGV4LWZpeGVkXCIgbmctaWY9XCJzaG93TWFwXCI+PC9tZC1pY29uPidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICc8L2Rpdj48L21kLWJ1dHRvbj4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnPGRpdiBjbGFzcz1cInBpcC1sb2NhdGlvbi1jb250YWluZXJcIidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICduZy1jbGFzcz1cInBpcFNob3dMb2NhdGlvbkljb24gPyBcXCdwaXAtbG9jYXRpb24taWNvbi1zcGFjZVxcJyA6IFxcJ1xcJ1wiPjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3BpcExvY2F0aW9uQ29udHJvbGxlcidcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgdGhpc01vZHVsZS5jb250cm9sbGVyKCdwaXBMb2NhdGlvbkNvbnRyb2xsZXInLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMpIHtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHRvQm9vbGVhbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09ICcxJyB8fCB2YWx1ZSA9PSAndHJ1ZSc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBcclxuICAgICAgICAgICAgICAgICRuYW1lID0gJGVsZW1lbnQuY2hpbGRyZW4oJy5waXAtbG9jYXRpb24tbmFtZScpLFxyXG4gICAgICAgICAgICAgICAgJG1hcENvbnRhaW5lciA9ICRlbGVtZW50LmNoaWxkcmVuKCcucGlwLWxvY2F0aW9uLWNvbnRhaW5lcicpLFxyXG4gICAgICAgICAgICAgICAgJG1hcENvbnRyb2wgPSBudWxsLFxyXG4gICAgICAgICAgICAgICAgJHVwID0gJGVsZW1lbnQuZmluZCgnLmljb24tdXAnKSxcclxuICAgICAgICAgICAgICAgICRkb3duID0gJGVsZW1lbnQuZmluZCgnLmljb24tZG93bicpLFxyXG4gICAgICAgICAgICAgICAgY29sbGFwc2FibGUgPSB0b0Jvb2xlYW4oJGF0dHJzLnBpcENvbGxhcHNlKTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFyTWFwKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIG1hcCBjb250cm9sXHJcbiAgICAgICAgICAgICAgICBpZiAoJG1hcENvbnRyb2wpICRtYXBDb250cm9sLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgJG1hcENvbnRyb2wgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgJG1hcENvbnRhaW5lci5oaWRlKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZU1hcCgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9ICRzY29wZS5waXBMb2NhdGlvblBvcygpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBTYWZlZ3VhcmQgZm9yIGJhZCBjb29yZGluYXRlc1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5zaG93TWFwID09IGZhbHNlIHx8IGxvY2F0aW9uID09IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB8fCBsb2NhdGlvbi5jb29yZGluYXRlcyA9PSBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgfHwgbG9jYXRpb24uY29vcmRpbmF0ZXMubGVuZ3RoIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyTWFwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIERldGVybWluZSBtYXAgY29vcmRpbmF0ZXNcclxuICAgICAgICAgICAgICAgIHZhciBjb29yZGluYXRlcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoXHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uY29vcmRpbmF0ZXNbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uY29vcmRpbmF0ZXNbMV1cclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGNvbnRyb2xcclxuICAgICAgICAgICAgICAgIGlmICgkbWFwQ29udHJvbCkgJG1hcENvbnRyb2wucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAkbWFwQ29udHJvbCA9ICQoJzxkaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAkbWFwQ29udGFpbmVyLnNob3coKTtcclxuICAgICAgICAgICAgICAgICRtYXBDb250cm9sLmFwcGVuZFRvKCRtYXBDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbWFwIHdpdGggcG9pbnQgbWFya2VyXHJcbiAgICAgICAgICAgICAgICB2YXIgXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyOiBjb29yZGluYXRlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcFR5cGVJZDogZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVEZWZhdWx0VUk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVEb3VibGVDbGlja1pvb206IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcCgkbWFwQ29udHJvbFswXSwgbWFwT3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogY29vcmRpbmF0ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gUHJvY2VzcyB1c2VyIGFjdGlvbnNcclxuICAgICAgICAgICAgaWYgKCFjb2xsYXBzYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dNYXAgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICR1cC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkbWFwQ29udGFpbmVyLmhpZGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkbmFtZS5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJGF0dHJzLmRpc2FibGVkKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNob3dNYXAgPSAhJHNjb3BlLnNob3dNYXA7XHJcbiAgICAgICAgICAgICAgICAgICAgJHVwWyRzY29wZS5zaG93TWFwID8gJ3Nob3cnIDogJ2hpZGUnXSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICRkb3duWyEkc2NvcGUuc2hvd01hcCA/ICdzaG93JyA6ICdoaWRlJ10oKTtcclxuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZU1hcCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFdhdGNoIGZvciBsb2NhdGlvbiBjaGFuZ2VzXHJcbiAgICAgICAgICAgIGlmICh0b0Jvb2xlYW4oJGF0dHJzLnBpcFJlYmluZCkpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS4kd2F0Y2goJHNjb3BlLnBpcExvY2F0aW9uUG9zLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZU1hcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBjbGFzc1xyXG4gICAgICAgICAgICAkZWxlbWVudC5hZGRDbGFzcygncGlwLWxvY2F0aW9uJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBWaXN1YWxpemUgbWFwXHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUucGlwTG9jYXRpb25Qb3MoKSkgZ2VuZXJhdGVNYXAoKTtcclxuICAgICAgICAgICAgZWxzZSBjbGVhck1hcCgpO1xyXG4gICAgICAgIH0gICAgXHJcbiAgICApO1xyXG5cclxufSkoKTtcclxuIiwiLyoqXHJcbiAqIEBmaWxlIExvY2F0aW9uIGVkaXQgZGlhbG9nXHJcbiAqIEBjb3B5cmlnaHQgRGlnaXRhbCBMaXZpbmcgU29mdHdhcmUgQ29ycC4gMjAxNC0yMDE2XHJcbiAqIEB0b2RvXHJcbiAqIC0gSW1wcm92ZSBzYW1wbGUgaW4gc2FtcGxlciBhcHBcclxuICovXHJcbiBcclxuLyogZ2xvYmFsIGFuZ3VsYXIsIGdvb2dsZSAqL1xyXG5cclxuY2xhc3MgTG9jYXRpb25EaWFsb2dTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgXyRtZERpYWxvZzogYW5ndWxhci5tYXRlcmlhbC5JRGlhbG9nU2VydmljZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigkbWREaWFsb2c6IGFuZ3VsYXIubWF0ZXJpYWwuSURpYWxvZ1NlcnZpY2UpIHtcclxuICAgICAgICB0aGlzLl8kbWREaWFsb2cgPSAkbWREaWFsb2c7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNob3cgKHBhcmFtcywgc3VjY2Vzc0NhbGxiYWNrLCBjYW5jZWxDYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuXyRtZERpYWxvZy5zaG93KHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3BpcExvY2F0aW9uRWRpdERpYWxvZ0NvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2xvY2F0aW9uX2RpYWxvZy9sb2NhdGlvbl9kaWFsb2cuaHRtbCcsXHJcbiAgICAgICAgICAgIGxvY2Fsczoge1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25OYW1lOiBwYXJhbXMubG9jYXRpb25OYW1lLFxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb25Qb3M6IHBhcmFtcy5sb2NhdGlvblBvc1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOiB0cnVlXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzdWNjZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2FuY2VsQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIGNhbmNlbENhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuKCgpID0+IHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGZ1bmN0aW9uIExvY2F0aW9uRGlhbG9nUnVuICgkaW5qZWN0b3IpIHtcclxuICAgICAgICBsZXQgcGlwVHJhbnNsYXRlID0gJGluamVjdG9yLmhhcygncGlwVHJhbnNsYXRlJykgPyAkaW5qZWN0b3IuZ2V0KCdwaXBUcmFuc2xhdGUnKSA6IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChwaXBUcmFuc2xhdGUpIHtcclxuICAgICAgICAgICAgcGlwVHJhbnNsYXRlLnNldFRyYW5zbGF0aW9ucygnZW4nLCB7XHJcbiAgICAgICAgICAgICAgICAnTE9DQVRJT05fQUREX0xPQ0FUSU9OJzogJ0FkZCBsb2NhdGlvbicsXHJcbiAgICAgICAgICAgICAgICAnTE9DQVRJT05fU0VUX0xPQ0FUSU9OJzogJ1NldCBsb2NhdGlvbicsXHJcbiAgICAgICAgICAgICAgICAnTE9DQVRJT05fQUREX1BJTic6ICdBZGQgcGluJyxcclxuICAgICAgICAgICAgICAgICdMT0NBVElPTl9SRU1PVkVfUElOJzogJ1JlbW92ZSBwaW4nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBwaXBUcmFuc2xhdGUuc2V0VHJhbnNsYXRpb25zKCdydScsIHtcclxuICAgICAgICAgICAgICAgICdMT0NBVElPTl9BRERfTE9DQVRJT04nOiAn0JTQvtCx0LDQstC40YLRjCDQvNC10YHRgtC+0L/QvtC70L7QttC10L3QuNC1JyxcclxuICAgICAgICAgICAgICAgICdMT0NBVElPTl9TRVRfTE9DQVRJT04nOiAn0J7Qv9GA0LXQtNC10LvQuNGC0Ywg0L/QvtC70L7QttC10L3QuNC1JyxcclxuICAgICAgICAgICAgICAgICdMT0NBVElPTl9BRERfUElOJzogJ9CU0L7QsdCw0LLQuNGC0Ywg0YLQvtGH0LrRgycsXHJcbiAgICAgICAgICAgICAgICAnTE9DQVRJT05fUkVNT1ZFX1BJTic6ICfQo9Cx0YDQsNGC0Ywg0YLQvtGH0LrRgydcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgncGlwTG9jYXRpb25FZGl0RGlhbG9nJywgWyduZ01hdGVyaWFsJywgICdwaXBMb2NhdGlvbnMuVGVtcGxhdGVzJ10pXHJcbiAgICAgICAgICAgLnJ1bihMb2NhdGlvbkRpYWxvZ1J1bilcclxuICAgICAgICAgICAuc2VydmljZSgncGlwTG9jYXRpb25FZGl0RGlhbG9nJywgTG9jYXRpb25EaWFsb2dTZXJ2aWNlKVxyXG5cclxuICAgIC5jb250cm9sbGVyKCdwaXBMb2NhdGlvbkVkaXREaWFsb2dDb250cm9sbGVyJywgXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJHJvb3RTY29wZSwgJHRpbWVvdXQsICRtZERpYWxvZywgIGxvY2F0aW9uUG9zLCBsb2NhdGlvbk5hbWUpIHtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS50aGVtZSA9ICRyb290U2NvcGUuJHRoZW1lO1xyXG4gICAgICAgICAgICAkc2NvcGUubG9jYXRpb25Qb3MgPSBsb2NhdGlvblBvcyAmJiBsb2NhdGlvblBvcy50eXBlID09ICdQb2ludCdcclxuICAgICAgICAgICAgICAgICYmIGxvY2F0aW9uUG9zLmNvb3JkaW5hdGVzICYmIGxvY2F0aW9uUG9zLmNvb3JkaW5hdGVzLmxlbmd0aCA9PSAyXHJcbiAgICAgICAgICAgICAgICA/IGxvY2F0aW9uUG9zIDogbnVsbDtcclxuICAgICAgICAgICAgJHNjb3BlLmxvY2F0aW9uTmFtZSA9IGxvY2F0aW9uTmFtZTtcclxuICAgICAgICAgICAgJHNjb3BlLnN1cHBvcnRTZXQgPSBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24gIT0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIC8vICRzY29wZS50cmFuc2FjdGlvbiA9IHBpcFRyYW5zYWN0aW9uKCdsb2NhdGlvbl9lZGl0X2RpYWxvZycsICRzY29wZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWFwID0gbnVsbCwgbWFya2VyID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU1hcmtlciAoY29vcmRpbmF0ZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChtYXJrZXIpIG1hcmtlci5zZXRNYXAobnVsbCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChjb29yZGluYXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGNvb3JkaW5hdGVzLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBnb29nbGUubWFwcy5BbmltYXRpb24uRFJPUFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc01hcmtlciA9IG1hcmtlcjtcclxuICAgICAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0aGlzTWFya2VyLCAnZHJhZ2VuZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHZhciBjb29yZGluYXRlcyA9IHRoaXNNYXJrZXIuZ2V0UG9zaXRpb24oKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTG9jYXRpb24oY29vcmRpbmF0ZXMsIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXJrZXI7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGFuZ2VMb2NhdGlvbihjb29yZGluYXRlcywgdGlkKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9jYXRpb25Qb3MgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BvaW50JyxcclxuICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlczogW2Nvb3JkaW5hdGVzLmxhdCgpLCBjb29yZGluYXRlcy5sbmcoKV1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUubG9jYXRpb25OYW1lID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGlkID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aWQgPSAkc2NvcGUudHJhbnNhY3Rpb24uYmVnaW4oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGlkID09IG51bGwpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSZWFkIGFkZHJlc3NcclxuICAgICAgICAgICAgICAgIHZhciBnZW9jb2RlciA9IG5ldyBnb29nbGUubWFwcy5HZW9jb2RlcigpO1xyXG4gICAgICAgICAgICAgICAgZ2VvY29kZXIuZ2VvY29kZSh7IGxvY2F0aW9uOiBjb29yZGluYXRlcyB9LCBmdW5jdGlvbihyZXN1bHRzLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiAoJHNjb3BlLnRyYW5zYWN0aW9uLmFib3J0ZWQodGlkKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBQcm9jZXNzIHBvc2l0aXZlIHJlc3BvbnNlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PSBnb29nbGUubWFwcy5HZW9jb2RlclN0YXR1cy5PS1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByZXN1bHRzICYmIHJlc3VsdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9jYXRpb25OYW1lID0gcmVzdWx0c1swXS5mb3JtYXR0ZWRfYWRkcmVzcztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS50cmFuc2FjdGlvbi5lbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIFdhaXQgdW50aWwgZGlhbG9nIGlzIGluaXRpYWxpemVkXHJcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXBDb250YWluZXIgPSAkKCcucGlwLWxvY2F0aW9uLWVkaXQtZGlhbG9nIC5waXAtbG9jYXRpb24tY29udGFpbmVyJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGNvb3JkaW5hdGUgb2YgdGhlIGNlbnRlclxyXG4gICAgICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gJHNjb3BlLmxvY2F0aW9uUG9zID9cclxuICAgICAgICAgICAgICAgICAgICBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubG9jYXRpb25Qb3MuY29vcmRpbmF0ZXNbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sb2NhdGlvblBvcy5jb29yZGluYXRlc1sxXVxyXG4gICAgICAgICAgICAgICAgICAgICkgOiBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbWFwIHdpdGggcG9pbnQgbWFya2VyXHJcbiAgICAgICAgICAgICAgICB2YXIgbWFwT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoMCwgMCksXHJcbiAgICAgICAgICAgICAgICAgICAgem9vbTogMSxcclxuICAgICAgICAgICAgICAgICAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVEZWZhdWx0VUk6IHRydWVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpZiAoY29vcmRpbmF0ZXMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcE9wdGlvbnMuY2VudGVyID0gY29vcmRpbmF0ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwT3B0aW9ucy56b29tID0gMTI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChtYXBDb250YWluZXJbMF0sIG1hcE9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgbWFya2VyID0gY3JlYXRlTWFya2VyKGNvb3JkaW5hdGVzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBGaXggcmVzaXppbmcgaXNzdWVcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobWFwLCAncmVzaXplJyk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCdwaXBMYXlvdXRSZXNpemVkJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobWFwID09IG51bGwpIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobWFwLCAncmVzaXplJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLm9uQWRkUGluID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hcCA9PSBudWxsKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gbWFwLmdldENlbnRlcigpO1xyXG4gICAgICAgICAgICAgICAgbWFya2VyID0gY3JlYXRlTWFya2VyKGNvb3JkaW5hdGVzKTtcclxuICAgICAgICAgICAgICAgIGNoYW5nZUxvY2F0aW9uKGNvb3JkaW5hdGVzLCBudWxsKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5vblJlbW92ZVBpbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChtYXAgPT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgbWFya2VyID0gY3JlYXRlTWFya2VyKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvY2F0aW9uUG9zID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2NhdGlvbk5hbWUgPSBudWxsO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLm9uWm9vbUluID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hcCA9PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB2YXIgem9vbSA9IG1hcC5nZXRab29tKCk7XHJcbiAgICAgICAgICAgICAgICBtYXAuc2V0Wm9vbSh6b29tICsgMSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUub25ab29tT3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hcCA9PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB2YXIgem9vbSA9IG1hcC5nZXRab29tKCk7XHJcbiAgICAgICAgICAgICAgICBtYXAuc2V0Wm9vbSh6b29tID4gMSA/IHpvb20gLSAxIDogem9vbSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUub25TZXRMb2NhdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChtYXAgPT0gbnVsbCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHZhciB0aWQgPSAkc2NvcGUudHJhbnNhY3Rpb24uYmVnaW4oKTtcclxuICAgICAgICAgICAgICAgIC8vIGlmICh0aWQgPT0gbnVsbCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICgkc2NvcGUudHJhbnNhY3Rpb24uYWJvcnRlZCh0aWQpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlLCBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlciA9IGNyZWF0ZU1hcmtlcihjb29yZGluYXRlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5zZXRDZW50ZXIoY29vcmRpbmF0ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAuc2V0Wm9vbSgxMik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VMb2NhdGlvbihjb29yZGluYXRlcywgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICRzY29wZS50cmFuc2FjdGlvbi5lbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtQWdlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDUwMDBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLm9uQ2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJG1kRGlhbG9nLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgJHNjb3BlLm9uQXBwbHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkbWREaWFsb2cuaGlkZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246ICRzY29wZS5sb2NhdGlvblBvcyxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvblBvczogJHNjb3BlLmxvY2F0aW9uUG9zLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uTmFtZTogJHNjb3BlLmxvY2F0aW9uTmFtZSAgIFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxuXHJcbn0pKCk7XHJcbiIsIi8qKlxyXG4gKiBAZmlsZSBMb2NhdGlvbiBlZGl0IGNvbnRyb2xcclxuICogQGNvcHlyaWdodCBEaWdpdGFsIExpdmluZyBTb2Z0d2FyZSBDb3JwLiAyMDE0LTIwMTZcclxuICogQHRvZG9cclxuICogLSBJbXByb3ZlIHNhbXBsZXMgaW4gc2FtcGxlciBhcHBcclxuICovXHJcbiBcclxuLyogZ2xvYmFsIGFuZ3VsYXIgKi9cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIHRoaXNNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZShcInBpcExvY2F0aW9uRWRpdFwiLCBbJ3BpcExvY2F0aW9uRWRpdERpYWxvZyddKTtcclxuXHJcbiAgICB0aGlzTW9kdWxlLmRpcmVjdGl2ZSgncGlwTG9jYXRpb25FZGl0JyxcclxuICAgICAgICBmdW5jdGlvbiAoJHBhcnNlLCAkaHR0cCwgcGlwTG9jYXRpb25FZGl0RGlhbG9nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0VBQycsXHJcbiAgICAgICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHBpcExvY2F0aW9uTmFtZTogJz0nLFxyXG4gICAgICAgICAgICAgICAgICAgIHBpcExvY2F0aW9uUG9zOiAnPScsXHJcbiAgICAgICAgICAgICAgICAgICAgcGlwTG9jYXRpb25Ib2xkZXI6ICc9JyxcclxuICAgICAgICAgICAgICAgICAgICBuZ0Rpc2FibGVkOiAnJicsXHJcbiAgICAgICAgICAgICAgICAgICAgcGlwQ2hhbmdlZDogJyYnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IFN0cmluZygpXHJcbiAgICAgICAgICAgICAgICAgICAgKyAnPG1kLWlucHV0LWNvbnRhaW5lciBjbGFzcz1cIm1kLWJsb2NrXCI+J1xyXG4gICAgICAgICAgICAgICAgICAgICsgJzxsYWJlbD57eyBcXCdMT0NBVElPTlxcJyB8IHRyYW5zbGF0ZSB9fTwvbGFiZWw+J1xyXG4gICAgICAgICAgICAgICAgICAgICsgJzxpbnB1dCBuZy1tb2RlbD1cInBpcExvY2F0aW9uTmFtZVwiJ1xyXG4gICAgICAgICAgICAgICAgICAgICsgJ25nLWRpc2FibGVkPVwibmdEaXNhYmxlZCgpXCIvPjwvbWQtaW5wdXQtY29udGFpbmVyPidcclxuICAgICAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwicGlwLWxvY2F0aW9uLWVtcHR5XCIgbGF5b3V0PVwiY29sdW1uXCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiPidcclxuICAgICAgICAgICAgICAgICAgICArICc8bWQtYnV0dG9uIGNsYXNzPVwibWQtcmFpc2VkXCIgbmctZGlzYWJsZWQ9XCJuZ0Rpc2FibGVkKClcIiBuZy1jbGljaz1cIm9uU2V0TG9jYXRpb24oKVwiJ1xyXG4gICAgICAgICAgICAgICAgICAgICsgJ2FyaWEtbGFiZWw9XCJMT0NBVElPTl9BRERfTE9DQVRJT05cIj4nXHJcbiAgICAgICAgICAgICAgICAgICAgKyAnPHNwYW4gY2xhc3M9XCJpY29uLWxvY2F0aW9uXCI+PC9zcGFuPiB7ezo6XFwnTE9DQVRJT05fQUREX0xPQ0FUSU9OXFwnIHwgdHJhbnNsYXRlIH19J1xyXG4gICAgICAgICAgICAgICAgICAgICsgJzwvbWQtYnV0dG9uPjwvZGl2PidcclxuICAgICAgICAgICAgICAgICAgICArICc8ZGl2IGNsYXNzPVwicGlwLWxvY2F0aW9uLWNvbnRhaW5lclwiIHRhYmluZGV4PVwie3sgbmdEaXNhYmxlZCgpID8gLTEgOiAwIH19XCInXHJcbiAgICAgICAgICAgICAgICAgICAgKyAnIG5nLWNsaWNrPVwib25NYXBDbGljaygkZXZlbnQpXCIgbmcta2V5cHJlc3M9XCJcIm9uTWFwS2V5UHJlc3MoJGV2ZW50KVwiPjwvZGl2PicsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbiAoJHNjb3BlLCAkZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmZpbmQoJ21kLWlucHV0LWNvbnRhaW5lcicpLmF0dHIoJ21kLW5vLWZsb2F0JywgISEkc2NvcGUucGlwTG9jYXRpb25Ib2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uICgkc2NvcGU6IGFueSwgJGVsZW1lbnQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkZW1wdHkgPSAkZWxlbWVudC5jaGlsZHJlbignLnBpcC1sb2NhdGlvbi1lbXB0eScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkbWFwQ29udGFpbmVyID0gJGVsZW1lbnQuY2hpbGRyZW4oJy5waXAtbG9jYXRpb24tY29udGFpbmVyJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRtYXBDb250cm9sID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXJNYXAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBtYXAgY29udHJvbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJG1hcENvbnRyb2wpICRtYXBDb250cm9sLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkbWFwQ29udHJvbCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUb2dnbGUgY29udHJvbCB2aXNpYmlsaXR5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRtYXBDb250YWluZXIuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkZW1wdHkuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlTWFwKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTYWZlZ3VhcmQgZm9yIGJhZCBjb29yZGluYXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSAkc2NvcGUucGlwTG9jYXRpb25Qb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbiA9PSBudWxsIHx8IGxvY2F0aW9uLmNvb3JkaW5hdGVzID09IG51bGwgfHwgbG9jYXRpb24uY29vcmRpbmF0ZXMubGVuZ3RoIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJNYXAoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIG1hcCBjb29yZGluYXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uY29vcmRpbmF0ZXNbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5jb29yZGluYXRlc1sxXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGNvbnRyb2xcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRtYXBDb250cm9sKSAkbWFwQ29udHJvbC5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRvZ2dsZSBjb250cm9sIHZpc2liaWxpdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgJG1hcENvbnRhaW5lci5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbXB0eS5oaWRlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYSBuZXcgbWFwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRtYXBDb250cm9sID0gJCgnPGRpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJG1hcENvbnRyb2wuYXBwZW5kVG8oJG1hcENvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIG1hcCB3aXRoIHBvaW50IG1hcmtlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFwT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcjogY29vcmRpbmF0ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcFR5cGVJZDogZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlRGVmYXVsdFVJOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZURvdWJsZUNsaWNrWm9vbTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoJG1hcENvbnRyb2xbMF0sIG1hcE9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogY29vcmRpbmF0ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXA6IG1hcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZWZpbmVDb29yZGluYXRlcygpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9ICRzY29wZS5waXBMb2NhdGlvbk5hbWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYXRpb25OYW1lID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGlwTG9jYXRpb25Qb3MgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJNYXAoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbj9hZGRyZXNzPScgKyBsb2NhdGlvbk5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7IC4uLiB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgIC5lcnJvcihmdW5jdGlvbiAocmVzcG9uc2UpIHsuLi4gfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvY29kZXIgPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VvY29kZXIuZ2VvY29kZSh7IGFkZHJlc3M6IGxvY2F0aW9uTmFtZSB9LCBmdW5jdGlvbihyZXN1bHRzLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJvY2VzcyByZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgPT0gZ29vZ2xlLm1hcHMuR2VvY29kZXJTdGF0dXMuT0spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGVtcHR5IHJlc3VsdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdHMgPT0gbnVsbCB8fCByZXN1bHRzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGlwTG9jYXRpb25Qb3MgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJNYXAoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSByZXN1bHRzWzBdLmdlb21ldHJ5IHx8IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSBnZW9tZXRyeS5sb2NhdGlvbiB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBlbXB0eSByZXN1bHRzIGFnYWluXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbi5sYXQgPT0gbnVsbCB8fCBsb2NhdGlvbi5sbmcgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBpcExvY2F0aW9uUG9zID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyTWFwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5waXBMb2NhdGlvblBvcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmxhdCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmxuZygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2dlbmVyYXRlTWFwKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByb2Nlc3MgZXJyb3IuLi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBpcExvY2F0aW9uUG9zID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jbGVhck1hcCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWZpbmVDb29yZGluYXRlc0RlYm91bmNlZCA9IF8uZGVib3VuY2UoZGVmaW5lQ29vcmRpbmF0ZXMsIDIwMDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBQcm9jZXNzIHVzZXIgYWN0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vblNldExvY2F0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUubmdEaXNhYmxlZCgpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpcExvY2F0aW9uRWRpdERpYWxvZy5zaG93KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uTmFtZTogJHNjb3BlLnBpcExvY2F0aW9uTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvblBvczogJHNjb3BlLnBpcExvY2F0aW9uUG9zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSByZXN1bHQubG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uTmFtZSA9IHJlc3VsdC5sb2NhdGlvbk5hbWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdCBjaGFuZ2UgYW55dGhpbmcgaWYgbG9jYXRpb24gaXMgYWJvdXQgdGhlIHNhbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBpcExvY2F0aW9uUG9zICYmICRzY29wZS5waXBMb2NhdGlvblBvcy50eXBlID09ICdQb2ludCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgJHNjb3BlLnBpcExvY2F0aW9uUG9zLmNvb3JkaW5hdGVzLmxlbmd0aCA9PSAyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGxvY2F0aW9uICYmIGxvY2F0aW9uLmNvb3JkaW5hdGVzLmxlbmd0aCA9PSAyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmICgkc2NvcGUucGlwTG9jYXRpb25Qb3MuY29vcmRpbmF0ZXNbMF0gLSBsb2NhdGlvbi5jb29yZGluYXRlc1swXSkgPCAwLjAwMDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCRzY29wZS5waXBMb2NhdGlvblBvcy5jb29yZGluYXRlc1sxXSAtIGxvY2F0aW9uLmNvb3JkaW5hdGVzWzFdKSA8IDAuMDAwMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAobG9jYXRpb25OYW1lID09ICRzY29wZS5waXBMb2NhdGlvbk5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBpcExvY2F0aW9uUG9zID0gbG9jYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBpcExvY2F0aW9uTmFtZSA9IGxvY2F0aW9uTmFtZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uTmFtZSA9PSBudWxsICYmIGxvY2F0aW9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBpcExvY2F0aW9uTmFtZSA9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJygnICsgcmVzdWx0LmxvY2F0aW9uLmNvb3JkaW5hdGVzWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICcsJyArIHJlc3VsdC5sb2NhdGlvbi5jb29yZGluYXRlc1sxXSArICcpJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBpcENoYW5nZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWFwQ29udGFpbmVyWzBdLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9uTWFwQ2xpY2sgPSBmdW5jdGlvbiAoJGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUubmdEaXNhYmxlZCgpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkbWFwQ29udGFpbmVyWzBdLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vblNldExvY2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5vbk1hcEtleVByZXNzID0gZnVuY3Rpb24oJGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUubmdEaXNhYmxlZCgpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGV2ZW50LmtleUNvZGUgPT0gMTMgfHwgJGV2ZW50LmtleUNvZGUgPT0gMzIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5vblNldExvY2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSAgXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2F0Y2ggZm9yIGxvY2F0aW9uIG5hbWUgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kd2F0Y2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUucGlwTG9jYXRpb25OYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPSBvbGRWYWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVDb29yZGluYXRlc0RlYm91bmNlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiR3YXRjaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5waXBMb2NhdGlvblBvc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZU1hcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGNsYXNzXHJcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQuYWRkQ2xhc3MoJ3BpcC1sb2NhdGlvbi1lZGl0Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFZpc3VhbGl6ZSBtYXBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBpcExvY2F0aW9uUG9zKSBnZW5lcmF0ZU1hcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgY2xlYXJNYXAoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICk7XHJcblxyXG59KSgpO1xyXG4iLCIvKipcclxuICogQGZpbGUgTG9jYXRpb24gSVAgY29udHJvbFxyXG4gKiBAY29weXJpZ2h0IERpZ2l0YWwgTGl2aW5nIFNvZnR3YXJlIENvcnAuIDIwMTQtMjAxNlxyXG4gKiBAdG9kb1xyXG4gKiAtIEltcHJvdmUgc2FtcGxlcyBpbiBzYW1wbGVyIGFwcFxyXG4gKi9cclxuIFxyXG4vKiBnbG9iYWwgYW5ndWxhciwgZ29vZ2xlICovXHJcblxyXG5kZWNsYXJlIGxldCBnb29nbGU6IGFueTtcclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIHRoaXNNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZShcInBpcExvY2F0aW9uSXBcIiwgW10pO1xyXG5cclxuICAgIHRoaXNNb2R1bGUuZGlyZWN0aXZlKCdwaXBMb2NhdGlvbklwJyxcclxuICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcclxuICAgICAgICAgICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGlwSXBhZGRyZXNzOiAnJicsXHJcbiAgICAgICAgICAgICAgICAgICAgcGlwRXh0cmFJbmZvOiAnJidcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJwaXAtbG9jYXRpb24tY29udGFpbmVyXCI+PC9kaXY+JyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdwaXBMb2NhdGlvbklwQ29udHJvbGxlcidcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgdGhpc01vZHVsZS5jb250cm9sbGVyKCdwaXBMb2NhdGlvbklwQ29udHJvbGxlcicsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJGh0dHApIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBcclxuICAgICAgICAgICAgICAgICRtYXBDb250YWluZXIgPSAkZWxlbWVudC5jaGlsZHJlbignLnBpcC1sb2NhdGlvbi1jb250YWluZXInKSxcclxuICAgICAgICAgICAgICAgICRtYXBDb250cm9sID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFyTWFwKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIG1hcCBjb250cm9sXHJcbiAgICAgICAgICAgICAgICBpZiAoJG1hcENvbnRyb2wpICRtYXBDb250cm9sLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgJG1hcENvbnRyb2wgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZU1hcChsYXRpdHVkZSwgbG9uZ2l0dWRlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTYWZlZ3VhcmQgZm9yIGJhZCBjb29yZGluYXRlc1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhdGl0dWRlID09IG51bGwgfHwgbG9uZ2l0dWRlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhck1hcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgbWFwIGNvb3JkaW5hdGVzXHJcbiAgICAgICAgICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKFxyXG4gICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgY29udHJvbFxyXG4gICAgICAgICAgICAgICAgaWYgKCRtYXBDb250cm9sKSAkbWFwQ29udHJvbC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICRtYXBDb250cm9sID0gJCgnPGRpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgICRtYXBDb250cm9sLmFwcGVuZFRvKCRtYXBDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbWFwIHdpdGggcG9pbnQgbWFya2VyXHJcbiAgICAgICAgICAgICAgICB2YXIgXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyOiBjb29yZGluYXRlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcFR5cGVJZDogZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVEZWZhdWx0VUk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVEb3VibGVDbGlja1pvb206IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcCgkbWFwQ29udHJvbFswXSwgbWFwT3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogY29vcmRpbmF0ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiB0b0Jvb2xlYW4odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PSAnMScgfHwgdmFsdWUgPT0gJ3RydWUnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkZWZpbmVDb29yZGluYXRlcygpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpcEFkZHJlc3MgPSAkc2NvcGUucGlwSXBhZGRyZXNzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGlwQWRkcmVzcyA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyTWFwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRvZG86IEZpbmQgbW9yZSByZWxpYWJsZSBnZW9jb2Rpbmcgc2VydmljZSB0byBsb2NhdGUgaXAgYWRkcmVzc2VzXHJcbiAgICAgICAgICAgICAgICAkaHR0cC5qc29ucCgnaHR0cHM6Ly93d3cuZ2VvcGx1Z2luLm5ldC9qc29uLmdwP2lwPScgKyBpcEFkZHJlc3MgKyAnJmpzb25jYWxsYmFjaz1KU09OX0NBTExCQUNLJylcclxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAhPSBudWxsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByZXNwb25zZS5nZW9wbHVnaW5fbGF0aXR1ZGUgIT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiByZXNwb25zZS5nZW9wbHVnaW5fbG9uZ2l0dWRlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlTWFwKHJlc3BvbnNlLmdlb3BsdWdpbl9sYXRpdHVkZSwgcmVzcG9uc2UuZ2VvcGx1Z2luX2xvbmdpdHVkZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBpcEV4dHJhSW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dHJhSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5OiByZXNwb25zZS5nZW9wbHVnaW5fY2l0eSwgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbkNvZGU6IHJlc3BvbnNlLmdlb3BsdWdpbl9yZWdpb25Db2RlLCAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZXNwb25zZS5nZW9wbHVnaW5fcmVnaW9uTmFtZSwgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFDb2RlOiByZXNwb25zZS5nZW9wbHVnaW5fYXJlYUNvZGUsICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudHJ5Q29kZTogcmVzcG9uc2UuZ2VvcGx1Z2luX2NvdW50cnlDb2RlLCAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyeTogcmVzcG9uc2UuZ2VvcGx1Z2luX2NvdW50cnlOYW1lLCAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGluZW50Q29kZTogcmVzcG9uc2UuZ2VvcGx1Z2luX2NvbnRpbmVudENvZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGlwRXh0cmFJbmZvKHsgZXh0cmFJbmZvOiBleHRyYUluZm8gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhck1hcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJNYXAoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBXYXRjaCBmb3IgbG9jYXRpb24gY2hhbmdlc1xyXG4gICAgICAgICAgICBpZiAodG9Cb29sZWFuKCRhdHRycy5waXBSZWJpbmQpKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJHdhdGNoKFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5waXBJcGFkZHJlc3MoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZUNvb3JkaW5hdGVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGNsYXNzXHJcbiAgICAgICAgICAgICRlbGVtZW50LmFkZENsYXNzKCdwaXAtbG9jYXRpb24taXAnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFZpc3VhbGl6ZSBtYXBcclxuICAgICAgICAgICAgZGVmaW5lQ29vcmRpbmF0ZXMoKTtcclxuICAgICAgICB9ICAgICAgICBcclxuICAgICk7XHJcblxyXG59KSgpO1xyXG5cclxuIiwiLyoqXHJcbiAqIEBmaWxlIExvY2F0aW9uIG1hcCBjb250cm9sXHJcbiAqIEBjb3B5cmlnaHQgRGlnaXRhbCBMaXZpbmcgU29mdHdhcmUgQ29ycC4gMjAxNC0yMDE2XHJcbiAqL1xyXG4gXHJcbi8qIGdsb2JhbCBhbmd1bGFyLCBnb29nbGUgKi9cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIHRoaXNNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZShcInBpcExvY2F0aW9uTWFwXCIsIFtdKTtcclxuXHJcbiAgICB0aGlzTW9kdWxlLmRpcmVjdGl2ZSgncGlwTG9jYXRpb25NYXAnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgICAgICBwaXBMb2NhdGlvblBvczogJyYnLFxyXG4gICAgICAgICAgICAgICAgICAgIHBpcExvY2F0aW9uUG9zaXRpb25zOiAnJicsXHJcbiAgICAgICAgICAgICAgICAgICAgcGlwSWNvblBhdGg6ICcmJyxcclxuICAgICAgICAgICAgICAgICAgICBwaXBEcmFnZ2FibGU6ICcmJyxcclxuICAgICAgICAgICAgICAgICAgICBwaXBTdHJldGNoOiAnJidcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJwaXAtbG9jYXRpb24tY29udGFpbmVyXCI+PC9kaXY+JyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdwaXBMb2NhdGlvbk1hcENvbnRyb2xsZXInXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIHRoaXNNb2R1bGUuY29udHJvbGxlcigncGlwTG9jYXRpb25NYXBDb250cm9sbGVyJyxcclxuICAgICAgICBbJyRzY29wZScsICckZWxlbWVudCcsICckYXR0cnMnLCAnJHBhcnNlJywgJyR0aW1lb3V0JywgZnVuY3Rpb24gKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJHBhcnNlLCAkdGltZW91dCkge1xyXG4gICAgICAgICAgICB2YXJcclxuICAgICAgICAgICAgICAgICRtYXBDb250YWluZXIgPSAkZWxlbWVudC5jaGlsZHJlbignLnBpcC1sb2NhdGlvbi1jb250YWluZXInKSxcclxuICAgICAgICAgICAgICAgICRtYXBDb250cm9sID0gbnVsbCxcclxuICAgICAgICAgICAgICAgIHN0cmV0Y2hNYXAgPSAkc2NvcGUucGlwU3RyZXRjaCgpIHx8IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaWNvblBhdGggPSAkc2NvcGUucGlwSWNvblBhdGgoKTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFyTWFwKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIG1hcCBjb250cm9sXHJcbiAgICAgICAgICAgICAgICBpZiAoJG1hcENvbnRyb2wpICRtYXBDb250cm9sLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgJG1hcENvbnRyb2wgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0xvY2F0aW9uIChsb2MpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhKGxvYyA9PSBudWxsXHJcbiAgICAgICAgICAgICAgICB8fCBsb2MuY29vcmRpbmF0ZXMgPT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgfHwgbG9jLmNvb3JkaW5hdGVzLmxlbmd0aCA8IDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBkZXRlcm1pbmVDb29yZGluYXRlcyhsb2MpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoXHJcbiAgICAgICAgICAgICAgICAgICAgbG9jLmNvb3JkaW5hdGVzWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvYy5jb29yZGluYXRlc1sxXVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBwb2ludC5maWxsID0gbG9jLmZpbGw7XHJcbiAgICAgICAgICAgICAgICBwb2ludC5zdHJva2UgPSBsb2Muc3Ryb2tlO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBwb2ludDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdG9Cb29sZWFuKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPT0gJzEnIHx8IHZhbHVlID09ICd0cnVlJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVNYXAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSAkc2NvcGUucGlwTG9jYXRpb25Qb3MoKSxcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbnMgPSAkc2NvcGUucGlwTG9jYXRpb25Qb3NpdGlvbnMoKSxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludHMgPSBbXSxcclxuICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGUgPSAkc2NvcGUucGlwRHJhZ2dhYmxlKCkgfHwgZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2FmZWd1YXJkIGZvciBiYWQgY29vcmRpbmF0ZXNcclxuICAgICAgICAgICAgICAgIGlmIChjaGVja0xvY2F0aW9uKGxvY2F0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKGRldGVybWluZUNvb3JkaW5hdGVzKGxvY2F0aW9uKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbnMgJiYgbG9jYXRpb25zLmxlbmd0aCAmJiBsb2NhdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAobG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tMb2NhdGlvbihsb2MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRzLnB1c2goZGV0ZXJtaW5lQ29vcmRpbmF0ZXMobG9jKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocG9pbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyTWFwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBjb250cm9sXHJcbiAgICAgICAgICAgICAgICBpZiAoJG1hcENvbnRyb2wpICRtYXBDb250cm9sLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgJG1hcENvbnRyb2wgPSAkKCc8ZGl2PjwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgJG1hcENvbnRyb2wuYXBwZW5kVG8oJG1hcENvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBtYXBcclxuICAgICAgICAgICAgICAgIHZhclxyXG4gICAgICAgICAgICAgICAgICAgIG1hcE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcjogcG9pbnRzWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwVHlwZUlkOiBnb29nbGUubWFwcy5NYXBUeXBlSWQuUk9BRE1BUCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZURlZmF1bHRVSTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZURvdWJsZUNsaWNrWm9vbTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsd2hlZWw6IGRyYWdnYWJsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBkcmFnZ2FibGVcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoJG1hcENvbnRyb2xbMF0sIG1hcE9wdGlvbnMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvdW5kcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbWFya2Vyc1xyXG4gICAgICAgICAgICAgICAgcG9pbnRzLmZvckVhY2goZnVuY3Rpb24ocG9pbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWNvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogaWNvblBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogcG9pbnQuZmlsbCB8fCAnI0VGNTM1MCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6IHBvaW50LnN0cm9rZSB8fCAnd2hpdGUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXZWlnaHQ6IDVcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHBvaW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXA6IG1hcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogaWNvblBhdGggPyBpY29uIDogbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvdW5kcy5leHRlbmQocG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQXV0by1jb25maWcgb2Ygem9vbSBhbmQgY2VudGVyXHJcbiAgICAgICAgICAgICAgICBpZiAocG9pbnRzLmxlbmd0aCA+IDEpIG1hcC5maXRCb3VuZHMoYm91bmRzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gV2F0Y2ggZm9yIGxvY2F0aW9uIGNoYW5nZXNcclxuICAgICAgICAgICAgaWYgKHRvQm9vbGVhbigkYXR0cnMucGlwUmViaW5kKSkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLiR3YXRjaChcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUucGlwTG9jYXRpb25Qb3MoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZU1hcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBjbGFzc1xyXG4gICAgICAgICAgICAkZWxlbWVudC5hZGRDbGFzcygncGlwLWxvY2F0aW9uLW1hcCcpO1xyXG4gICAgICAgICAgICBpZiAoc3RyZXRjaE1hcCkgJG1hcENvbnRhaW5lci5hZGRDbGFzcygnc3RyZXRjaCcpO1xyXG5cclxuICAgICAgICAgICAgLy8gVmlzdWFsaXplIG1hcFxyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLnBpcExvY2F0aW9uUG9zKCkgfHwgJHNjb3BlLnBpcExvY2F0aW9uUG9zaXRpb25zKCkpICR0aW1lb3V0KGdlbmVyYXRlTWFwLCAyMDApO1xyXG4gICAgICAgICAgICBlbHNlIGNsZWFyTWFwKCk7XHJcbiAgICAgICAgfV1cclxuICAgICk7XHJcblxyXG59KSgpO1xyXG5cclxuIiwi77u/Ly8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL3R5cGluZ3MvdHNkLmQudHNcIiAvPlxyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgncGlwTG9jYXRpb25zJywgWyAgICAgICAgXHJcbiAgICAgICAgJ3BpcExvY2F0aW9uJyxcclxuICAgICAgICAncGlwTG9jYXRpb25NYXAnLFxyXG4gICAgICAgICdwaXBMb2NhdGlvbklwJyxcclxuICAgICAgICAncGlwTG9jYXRpb25FZGl0RGlhbG9nJyxcclxuICAgICAgICAncGlwTG9jYXRpb25FZGl0JyxcclxuICAgICAgICAncGlwTG9jYXRpb25zLlRyYW5zbGF0ZSdcclxuICAgIF0pO1xyXG4gICAgXHJcbn0pKCk7XHJcblxyXG5cclxuIiwiKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcExvY2F0aW9ucy5UZW1wbGF0ZXMnKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcExvY2F0aW9ucy5UZW1wbGF0ZXMnLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2xvY2F0aW9uX2RpYWxvZy9sb2NhdGlvbl9kaWFsb2cuaHRtbCcsXG4gICAgJzxtZC1kaWFsb2cgY2xhc3M9XCJwaXAtZGlhbG9nIHBpcC1sb2NhdGlvbi1lZGl0LWRpYWxvZyBsYXlvdXQtY29sdW1uXCIgbWQtdGhlbWU9XCJ7e3RoZW1lfX1cIj48ZGl2IGNsYXNzPVwicGlwLWhlYWRlciBsYXlvdXQtY29sdW1uIGxheW91dC1hbGlnbi1zdGFydC1zdGFydFwiPjxtZC1wcm9ncmVzcy1saW5lYXIgbmctc2hvdz1cInRyYW5zYWN0aW9uLmJ1c3koKVwiIG1kLW1vZGU9XCJpbmRldGVybWluYXRlXCIgY2xhc3M9XCJwaXAtcHJvZ3Jlc3MtdG9wXCI+PC9tZC1wcm9ncmVzcy1saW5lYXI+PGgzIGNsYXNzPVwiZmxleFwiPnt7IFxcJ0xPQ0FUSU9OX1NFVF9MT0NBVElPTlxcJyB8IHRyYW5zbGF0ZSB9fTwvaDM+PC9kaXY+PGRpdiBjbGFzcz1cInBpcC1mb290ZXJcIj48ZGl2IGNsYXNzPVwibGF5b3V0LXJvdyBsYXlvdXQtYWxpZ24tc3RhcnQtY2VudGVyXCI+PG1kLWJ1dHRvbiBjbGFzcz1cIm1kLWFjY2VudFwiIG5nLWNsaWNrPVwib25BZGRQaW4oKVwiIG5nLXNob3c9XCJsb2NhdGlvblBvcyA9PSBudWxsXCIgbmctZGlzYWJsZWQ9XCJ0cmFuc2FjdGlvbi5idXN5KClcIiBhcmlhLWxhYmVsPVwie3sgOjpcXCdMT0NBVElPTl9BRERfUElOXFwnIH19XCI+e3sgOjpcXCdMT0NBVElPTl9BRERfUElOXFwnIHwgdHJhbnNsYXRlIH19PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBjbGFzcz1cIm1kLWFjY2VudFwiIG5nLWNsaWNrPVwib25SZW1vdmVQaW4oKVwiIG5nLXNob3c9XCJsb2NhdGlvblBvcyAhPSBudWxsXCIgbmctZGlzYWJsZWQ9XCJ0cmFuc2FjdGlvbi5idXN5KClcIiBhcmlhLWxhYmVsPVwie3sgOjpcXCdMT0NBVElPTl9SRU1PVkVfUElOXFwnIH19XCI+e3sgOjpcXCdMT0NBVElPTl9SRU1PVkVfUElOXFwnIHwgdHJhbnNsYXRlIH19PC9tZC1idXR0b24+PC9kaXY+PGRpdiBjbGFzcz1cImZsZXhcIj48L2Rpdj48ZGl2IGNsYXNzPVwibGF5b3V0LXJvdyBsYXlvdXQtYWxpZ24tZW5kLWNlbnRlclwiPjxtZC1idXR0b24gbmctY2xpY2s9XCJvbkNhbmNlbCgpXCIgYXJpYS1sYWJlbD1cInt7IDo6XFwnQ0FOQ0VMXFwnIH19XCI+e3sgOjpcXCdDQU5DRUxcXCcgfCB0cmFuc2xhdGUgfX08L21kLWJ1dHRvbj48bWQtYnV0dG9uIGNsYXNzPVwibWQtYWNjZW50XCIgbmctY2xpY2s9XCJvbkFwcGx5KClcIiBuZy1kaXNhYmxlZD1cInRyYW5zYWN0aW9uLmJ1c3koKVwiIGFyaWEtbGFiZWw9XCJ7eyA6OlxcJ0FQUExZXFwnIH19XCI+e3sgOjpcXCdBUFBMWVxcJyB8IHRyYW5zbGF0ZSB9fTwvbWQtYnV0dG9uPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJwaXAtYm9keVwiPjxkaXYgY2xhc3M9XCJwaXAtbG9jYXRpb24tY29udGFpbmVyXCI+PC9kaXY+PG1kLWJ1dHRvbiBjbGFzcz1cIm1kLWljb24tYnV0dG9uIG1kLWZhYiBwaXAtem9vbS1pblwiIG5nLWNsaWNrPVwib25ab29tSW4oKVwiIGFyaWEtbGFiZWw9XCJ7eyA6OlxcJ0xPQ0FUSU9OX1pPT01fSU5cXCcgfX1cIj48bWQtaWNvbiBtZC1zdmctaWNvbj1cImljb25zOnBsdXNcIj48L21kLWljb24+PC9tZC1idXR0b24+PG1kLWJ1dHRvbiBjbGFzcz1cIm1kLWljb24tYnV0dG9uIG1kLWZhYiBwaXAtem9vbS1vdXRcIiBuZy1jbGljaz1cIm9uWm9vbU91dCgpXCIgYXJpYS1sYWJlbD1cInt7IDo6XFwnTE9DQVRJT05fWk9PTV9PVVRcXCcgfX1cIj48bWQtaWNvbiBtZC1zdmctaWNvbj1cImljb25zOm1pbnVzXCI+PC9tZC1pY29uPjwvbWQtYnV0dG9uPjxtZC1idXR0b24gY2xhc3M9XCJtZC1pY29uLWJ1dHRvbiBtZC1mYWIgcGlwLXNldC1sb2NhdGlvblwiIG5nLWNsaWNrPVwib25TZXRMb2NhdGlvbigpXCIgYXJpYS1sYWJlbD1cInt7IDo6XFwnTE9DQVRJT05fU0VUX0xPQ0FUSU9OXFwnIH19XCIgbmctc2hvdz1cInN1cHBvcnRTZXRcIiBuZy1kaXNhYmxlZD1cInRyYW5zYWN0aW9uLmJ1c3koKVwiPjxtZC1pY29uIG1kLXN2Zy1pY29uPVwiaWNvbnM6dGFyZ2V0XCI+PC9tZC1pY29uPjwvbWQtYnV0dG9uPjwvZGl2PjwvbWQtZGlhbG9nPicpO1xufV0pO1xufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwLXdlYnVpLWxvY2F0aW9ucy1odG1sLm1pbi5qcy5tYXBcbiJdfQ=="}